---
lab:
  title: setup.sh を使用しない、リソースの作成
---

# Azure Machine Learning ワークスペースを詳しく見る

Azure Machine Learning には、機械学習モデルをトレーニングおよび管理するためのデータ サイエンス プラットフォームが用意されています。 このラボでは、Azure Machine Learning ワークスペースを作成し、ワークスペースを操作するさまざまな方法について学びます。 このラボは、Azure Machine Learning のさまざまなコア機能と開発者ツールの入門編として設計されています。 機能について詳しく知りたい場合は、他にも探索するラボがあります。

## 開始する前に

管理レベルのアクセス権を持つ [Azure サブスクリプション](https://azure.microsoft.com/free?azure-portal=true)が必要です。

## Azure Machine Learning ワークスペースをプロビジョニングする

Azure Machine Learning ''ワークスペース'' では、モデルのトレーニングと管理に必要なすべてのリソースと資産を管理するための中心的な場所が提供されます。**** ワークスペースは、Azure portal で対話型インターフェイスを使用して、または Azure CLI と Azure Machine Learning 拡張機能を使用してプロビジョニングすることができます。 ほとんどの運用シナリオでは、CLI を使用してプロビジョニングを自動化し、反復可能な開発と運用 (*DevOps*) プロセスにリソースのデプロイを組み込めるようにすることをお勧めします。 

この演習では、Azure portal を使用して Azure Machine Learning をプロビジョニングし、すべてのオプションを調べていきます。

1. `https://portal.azure.com/` にサインインします。
2. 次の設定を使用して新しい **Azure Machine Learning** リソースを作成します。
    - **[サブスクリプション]**:"*ご自身の Azure サブスクリプション*"
    - **リソース グループ**: `rg-dp100-labs`
    - **ワークスペース名**: `mlw-dp100-labs`
    - **[リージョン]**: "*最も近い地理的リージョンを選択します*"
    - **[ストレージ アカウント]**: "*ワークスペース用に作成される既定の新しいストレージ アカウントに注目します*"
    - **[キー コンテナー]**: *ワークスペース用に作成される既定の新しいキー コンテナーです*
    - **[Application Insights]**: *ワークスペース用に作成される既定の新しい Application Insights リソースです*
    - **[コンテナー レジストリ]**: なし (*コンテナーにモデルを初めてデプロイするときに、自動的に作成されます*)
3. ワークスペースとそれに関連付けられているリソースが作成されるまで待ちます。通常、これには約 5 分かかります。

> **注**:Azure Machine Learning ワークスペースを作成する場合、いくつかの高度なオプションを使用して、*プライベート エンドポイント*経由のアクセスを制限し、データ暗号化用のカスタム キーを指定できます。 この演習ではこれらのオプションは使用しませんが、注意してください。

## Azure Machine Learning スタジオについて調べる

"Azure Machine Learning スタジオ" は、Azure Machine Learning ワークスペースにアクセスできる Web ベースのポータルです。** Azure Machine Learning スタジオを使用してワークスペース内のすべての資産とリソースを管理できます。

1. **rg-dp100-labs** という名前のリソース グループに移動します。
1. そのリソース グループに、Azure Machine Learning ワークスペース、Application Insights、キー コンテナー、ストレージ アカウントが含まれていることを確認します。
1. Azure Machine Learning ワークスペースを選択します。
1. **[概要]** ページから **[スタジオの起動]** を選択します。 ブラウザーで別のタブが開き、Azure Machine Learning スタジオが開きます。

## コンピューティング インスタンスを作成する

Azure Machine Learning ワークスペース内でワークロードを実行するには、コンピューティング リソースが必要です。 Azure Machine Learning の利点の 1 つは、大規模に実験とトレーニング スクリプトを実行できるクラウドベースのコンピューティングを作成できることです。

1. Azure Machine Learning スタジオで、左側のメニューから **[コンピューティング]** ページを選択します。 使用できるコンピューティング リソースは 4 種類あります。
    - **コンピューティング インスタンス**: Azure Machine Learning によって管理される仮想マシン。 データを探索し、機械学習モデルを反復的に実験する場合の開発に最適です。
    - **コンピューティング クラスター**:実験コードをオンデマンドで処理するための、仮想マシンのスケーラブルなクラスター。 運用コードまたは自動ジョブの実行に最適です。
    - **Kubernetes クラスター**:トレーニングとスコアリングに使われる Kubernetes クラスター。 大規模なリアルタイムのモデル デプロイに最適です。
    - **アタッチされたコンピューティング**: Virtual Machines や Azure Databricks クラスターなどの既存の Azure コンピューティング リソースをワークスペースにアタッチします。

    デザイナーで作成した機械学習モデルをトレーニングするには、コンピューティング インスタンスまたはコンピューティング クラスターを使用できます。

2. **コンピューティング インスタンス** タブで、次の設定を使用して新しいコンピューティング インスタンスを追加します。 
    - **コンピューティング名**:*一意の名前を入力*
    - **場所**: "自動的にワークスペースと同じ場所になります"**
    - **仮想マシンの種類**: `CPU`
    - **仮想マシンのサイズ**: `Standard_DS11_v2`
    - **使用可能なクォータ**: 使用できる専用コアが表示されます。
    - **詳細設定の表示**:次の設定に注意しますが、選択しないでください。
        - **SSH アクセスを有効にする**: `Unselected` "(これを使って、SSH クライアントを使用した仮想マシンへの直接アクセスを有効にすることができます)"**
        - **仮想ネットワークの有効化**: `Unselected` "(通常、これをエンタープライズ環境で使用してネットワーク セキュリティを強化します)"**
        - **別のユーザーに割り当てる**: `Unselected` "(これを使用して、コンピューティング インスタンスをデータ サイエンティストに割り当てることができます)"**
        - **セットアップ スクリプトを使用したプロビジョニング**: `Unselected` "(これを使用して、作成時にリモート インスタンスで実行するスクリプトを追加できます)"**
        - **マネージド ID を割り当てる**: `Unselected` "(システム割り当てまたはユーザー割り当てのマネージド ID をアタッチして、リソースへのアクセスを許可できます)"**

3. **[作成]** を選択し、コンピューティング インスタンスが起動して状態が **[実行中]** に変わるまでの間に、次の手順に進みます。

> **注**:コンピューティング インスタンスとクラスターは、標準の Azure 仮想マシン イメージに基づいています。 この演習では、コストとパフォーマンスの最適なバランスを実現するために、*Standard_DS11_v2* イメージが推薦されます。 サブスクリプションに、このイメージを含まないクォータが存在する場合は、代替イメージを選択します。ただし、大きなイメージはコストを上昇させる可能性があり、小さなイメージはタスクを完了するには十分でない可能性があることに注意してください。 または、Azure 管理者にクォータを拡張するように依頼します。

## コンピューティング クラスターを作成する

1. Azure Machine Learning スタジオで、左側のメニューから **[コンピューティング]** ページを選択します。
2. **コンピューティング クラスター** タブで、次の設定を使用して新しいコンピューティング クラスターを追加します。 
    - **場所**: "自動的にワークスペースと同じ場所になります"**
    - **バーチャル マシン層**: `Dedicated`
    - **仮想マシンの種類**: `CPU`
    - **仮想マシンのサイズ**: `STANDARD_DS11_V2`
    - **コンピューティング名**:`aml-cluster`
    - **最小ノード数**: `0`
    - **最大ノード数**: `2`
    - **スケール ダウンする前のアイドル時間 (秒)** : `3600`
    - **SSHアクセスを有効にする**: `Unselected`
3. **[作成]** を選択し、コンピューティングクラスターが起動して状態が **[実行中]** に変われば作成完了です。